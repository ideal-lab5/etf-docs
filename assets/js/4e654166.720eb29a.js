"use strict";(self.webpackChunketf_docs=self.webpackChunketf_docs||[]).push([[337],{9006:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>c,default:()=>u,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var n=t(5893),a=t(1151);const r={},c="Run a Validator",i={id:"ETF basics/validator",title:"Run a Validator",description:"This is a WIP.",source:"@site/docs/ETF basics/validator.md",sourceDirName:"ETF basics",slug:"/ETF basics/validator",permalink:"/etf-docs/docs/ETF basics/validator",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/ETF basics/validator.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Timelock Auction",permalink:"/etf-docs/docs/ETF basics/timelock_auction"},next:{title:"ETF - Extras",permalink:"/etf-docs/docs/category/etf---extras"}},o={},l=[{value:"Setup system service",id:"setup-system-service",level:2}];function d(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,a.a)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h1,{id:"run-a-validator",children:"Run a Validator"}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsxs)(s.p,{children:["\u26a0\ufe0f"," This is a WIP."]}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"This is a guide on how to setup a full validator node on an ubuntu instance."}),"\n",(0,n.jsx)(s.p,{children:"This will walk through:"}),"\n",(0,n.jsxs)(s.ol,{children:["\n",(0,n.jsx)(s.li,{children:"Installing dependencies, chain spec, and node  (TODO)"}),"\n",(0,n.jsx)(s.li,{children:"Setting up the node as a system service (In progress)"}),"\n",(0,n.jsx)(s.li,{children:"configuring proxies (nginx) and certs (lets encrypt) for the websocket connections (TODO)"}),"\n"]}),"\n",(0,n.jsx)(s.p,{children:"Some of this information can apply to any substrate based node, not only etf network nodes."}),"\n",(0,n.jsx)(s.h2,{id:"setup-system-service",children:"Setup system service"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"mkdir /etf\ncd /etf\nwget https://raw.githubusercontent.com/ideal-lab5/substrate/milestone3/etfTestSpecRaw.json\nsudo nano etf.service\n\n"})}),"\n",(0,n.jsx)(s.p,{children:"Then configure the file:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"[Unit]\nDescription=ETF Bootstrap Node\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStartPre=/usr/bin/docker pull ideallabs/etf\nExecStart=/usr/bin/docker run --rm -v /home/ubuntu/etf/etfTestSpecRaw.json:/data/chainspec.json  -p 9944:9944 -p 30333:30333 -p 9615:9615 ideallabs/etf  --chain=/data/chainspec.json [add your params]\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,n.jsx)(s.p,{children:'Replace the path to the chainspec with the absolute path of wherever you stored the file. Also replace [add your params] with whatever is desired, for example, if you wanted to run a full "Alice" validator exposed as a bootstrap node, you could run with:'}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"--alice --unsafe-rpc-external --rpc-cors all \\\n--node-key 0000000000000000000000000000000000000000000000000000000000000001 \\\n--listen-addr /ip4/0.0.0.0/tcp/30332 --listen-addr /ip4/0.0.0.0/tcp/30333/ws \\\n--prometheus-external\n"})}),"\n",(0,n.jsxs)(s.p,{children:["Store the file as ",(0,n.jsx)(s.code,{children:"etf.service"})," and create a symlink in the systemd service directory and enable the service:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"cd /etc/systemd/system/\n#  create a symlink\nsudo ln -s ~/etf/etf.service .\n# enable the service\nsudo systemctl enable etf.service\n"})}),"\n",(0,n.jsx)(s.p,{children:"Then use it as any other system service:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"sudo systemctl [start | stop | status] etf\n"})})]})}function u(e={}){const{wrapper:s}={...(0,a.a)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},1151:(e,s,t)=>{t.d(s,{Z:()=>i,a:()=>c});var n=t(7294);const a={},r=n.createContext(a);function c(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:c(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);