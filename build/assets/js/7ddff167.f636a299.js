"use strict";(self.webpackChunkidn_docs=self.webpackChunkidn_docs||[]).push([[26],{6755:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>d});var s=t(5893),r=t(1151);const a={sidebar_position:5},i="Run a Validator",o={id:"build/validator",title:"Run a Validator",description:"This is a WIP.",source:"@site/docs/build/validator.md",sourceDirName:"build",slug:"/build/validator",permalink:"/docs/build/validator",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/build/validator.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"ETF SDK",permalink:"/docs/build/etf_sdk"},next:{title:"Learn",permalink:"/docs/category/learn"}},c={},d=[{value:"Setup system service",id:"setup-system-service",level:2}];function l(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"run-a-validator",children:"Run a Validator"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f"," This is a WIP."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This is a guide on how to setup a full validator node on an ubuntu instance."}),"\n",(0,s.jsx)(n.p,{children:"This will walk through:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Installing dependencies, chain spec, and node (TODO)"}),"\n",(0,s.jsx)(n.li,{children:"Setting up the node as a system service (In progress)"}),"\n",(0,s.jsx)(n.li,{children:"configuring proxies (nginx) and certs (lets encrypt) for the websocket connections (TODO)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Some of this information can apply to any substrate based node, not only Ideal Network nodes."}),"\n",(0,s.jsx)(n.h2,{id:"setup-system-service",children:"Setup system service"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"mkdir /etf\ncd /etf\nwget https://raw.githubusercontent.com/ideal-lab5/substrate/milestone3/etfTestSpecRaw.json\nsudo nano etf.service\n\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then configure the file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"[Unit]\nDescription=ETF Bootstrap Node\nAfter=docker.service\nRequires=docker.service\n\n[Service]\nTimeoutStartSec=0\nExecStartPre=-/usr/bin/docker stop %n\nExecStartPre=-/usr/bin/docker rm %n\nExecStartPre=/usr/bin/docker pull ideallabs/etf\nExecStart=/usr/bin/docker run --rm -v /home/ubuntu/etf/etfTestSpecRaw.json:/data/chainspec.json  -p 9944:9944 -p 30333:30333 -p 9615:9615 ideallabs/etf  --chain=/data/chainspec.json [add your params]\n\n[Install]\nWantedBy=multi-user.target\n"})}),"\n",(0,s.jsx)(n.p,{children:'Replace the path to the chainspec with the absolute path of wherever you stored the file. Also replace [add your params] with whatever is desired, for example, if you wanted to run a full "Alice" validator exposed as a bootstrap node, you could run with:'}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"--alice --unsafe-rpc-external --rpc-cors all \\\n--node-key 0000000000000000000000000000000000000000000000000000000000000001 \\\n--listen-addr /ip4/0.0.0.0/tcp/30332 --listen-addr /ip4/0.0.0.0/tcp/30333/ws \\\n--prometheus-external\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Store the file as ",(0,s.jsx)(n.code,{children:"etf.service"})," and create a symlink in the systemd service directory and enable the service:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"cd /etc/systemd/system/\n#  create a symlink\nsudo ln -s ~/etf/etf.service .\n# enable the service\nsudo systemctl enable etf.service\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then use it as any other system service:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"sudo systemctl [start | stop | status] etf\n"})})]})}function u(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>o,a:()=>i});var s=t(7294);const r={},a=s.createContext(r);function i(e){const n=s.useContext(a);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(a.Provider,{value:n},e.children)}}}]);